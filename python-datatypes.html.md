# 基本数据类型


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

在计算机世界，数据需要通过0和1来表示。而Python作为一种我们与计算机的交流语言，提供了一个基本数据类型的工具箱，每个基本数据类型就是一个个工具。掌握了这些数据类型，你就可以通过编程了指挥计算机为你服务了!

每种数据类型都有它的的特点和适用场景：

1.  不同的数据类型占用不同的内存空间,这让计算机能更高效地运行
2.  不同的数据类型支持不同的操作,比如数字可以做运算,字符串可以拼接
3.  合适的数据类型让代码更清晰易懂,也更不容易出错

Python的数据类型就像一个个特制的容器，每种特制容器都是为了存放特定类型的数据而设计。下面就让我们逐个了解每个容器吧:

## 整数 (int)

首先我们来看最熟悉的整数，在Python中我们可以用整数类型可以代表任何数学中的整数，这里注意Python中的整数是没有大小限制的哦。

``` python
x = 2
y = -56
big_num = 44823098509234
```

我们在数学中学到的各类算数运算都可以直接使用在整数上。

``` python
1+ 2 * 4 - 7
```

    2

<div>

> **Important**
>
> Python中整数可以无限大，其内部采用一种**变长数组**的存储方式，将一个大整数分割成了一个个*数字块*.

</div>

``` python
print(big_num)
```

    44823098509234

## 浮点数(Float)

当你需要的数字带有小数点，这时我们就需要浮点数(Float)这个专属容器了，例如下面这个例子：

``` python
pi = 3.1415926
```

### 浮点数是怎么存储的呢?

浮点数采用了IEEE754标准双精度标准，包含了三个关键部分。

<table>
<thead>
<tr>
<th>符号位(1位)</th>
<th>指数位(11位)</th>
<th>尾数位(52位)</th>
</tr>
</thead>
<tbody>
<tr>
<td>+/-</td>
<td>2^指数</td>
<td>1. xxxxx</td>
</tr>
</tbody>
</table>

让我们通过一个形象的比喻来理解：

- 符号位就像一个正负号开关（+ 或 -）
- 指数位就像是科学计数法中的”10的多少次方”
- 尾数位就像是具体的数字部分

``` python
import struct
import binascii

def float_to_binary(num):
    # 将浮点数打包成二进制
    packed = struct.pack('!d', num)
    # 转换成十六进制查看
    hex_str = binascii.hexlify(packed).decode('utf-8')
    # 转换成二进制字符串
    binary = bin(int(hex_str, 16))[2:].zfill(64)
    return binary

# 查看3.14的二进制表示
binary = float_to_binary(3.14)
print(f"符号位: {binary[0]}")
print(f"指数位: {binary[1:12]}")
print(f"尾数位: {binary[12:]}")
```

    符号位: 0
    指数位: 10000000000
    尾数位: 1001000111101011100001010001111010111000010100011111

以上就是通过数字3.14作为例子展示浮点数的存储结构。

我们再来看看浮点数里面的一些特殊值吧

``` python
inf = float('inf')
print(f"正无穷大是：{inf}")
ninf = float('-inf')
print(f"负无穷大是：{ninf}")
nan = float('nan') 
print(f"非数字是：{nan}")
```

    正无穷大是：inf
    负无穷大是：-inf
    非数字是：nan

<div>

> **Warning**
>
> 使用浮点数时候要特别小心精度问题。

</div>

``` python
result = 0.1 + 0.2

# 打印结果
print(f"0.1 + 0.2 = {result}")

# 检查是否等于0.3
print(f"结果是否等于0.3：{result == 0.3}")

# 查看更多小数位
print(f"结果的更多小数位：{result:.17f}")
```

    0.1 + 0.2 = 0.30000000000000004
    结果是否等于0.3：False
    结果的更多小数位：0.30000000000000004

``` python
x = 0.1 + 0.2
y = 0.3
def is_close(a, b, rel_tol=1e-9):
    return abs(a-b) <= rel_tol * max(abs(a), abs(b))

print(is_close(x, y))
```

    True

采用近似比较来解决上面的精度问题。

``` python
price = 0.1
total = price * 3
print(total)
```

    0.30000000000000004

上面这个精度问题，可以采用`Decimal`来解决。

``` python
from decimal import Decimal
price = Decimal('0.1')
total = price * 3
print(total)
```

    0.3

## 布尔值(bool)

作为最简单的数据类型，只有`True`和`False`两种状态。 \*
只有两个可能的值：True 和 False \* 用于逻辑运算和控制流 \* 实际上是 int
的子类，True 等同于 1，False 等同于 0

``` python
is_python_fun = True
is_coding_hard = False
```

``` python
print(type(True))   # 输出: <class 'bool'>
print(type(False))  # 输出: <class 'bool'>
```

    <class 'bool'>
    <class 'bool'>

实际上布尔值是`int`的子类，`True`等同于1, `False`等同于0.

``` python
print(f"布尔值是整型的子类吗？ {issubclass(bool, int)}")
```

    布尔值是整型的子类吗？ True

``` python
print(True + 0)   
print(False + 0)  
print(True - False)  
print(False * 2)
```

    1
    0
    1
    0

## 复数(Complex)

Python对复数的支持非常优雅，就像是给了每个数字一个”虚数小伙伴”！我们看看他们是怎么建立的吧。

``` python
z1 = 3 + 4j
z2 = complex(3, 4)
```

``` python
print(z1)
```

    (3+4j)

``` python
print(z2)
```

    (3+4j)

``` python
c = 3 + 1j
print(c)
```

    (3+1j)

<div>

> **Caution**
>
> 注意3+j 在Python中必须用`3+1j`表示

</div>

``` python
z1 = 1 + 2j
z2 = 3 + 4j

print(z1 + z2)    
print(z1 * z2)    
print(z1 / z2)    
print(z1 ** 2)
```

    (4+6j)
    (-5+10j)
    (0.44+0.08j)
    (-3+4j)

## NoneType

`None`就像是Python世界的”虚无”，它表示”什么都没有”或”不存在”。

``` python
result = None
```

可以用于函数的默认返回值

``` python
def say_hello():
    print("Hello!")

result = say_hello()
print(say_hello())
```

    Hello!
    Hello!
    None

或者用于初始化。

``` python
user_input = None
data_from_api = None
```

<div>

> **Caution**
>
> 注意`None`有些场景特别容易出错。

</div>

``` python
print(f"None是False吗？{bool(None)}")
```

    None是False吗？False

``` python
print(f"None == False? {None == False}")
```

    None == False? False

``` python
print(f"None is False? {None is False}")
```

    None is False? False

``` python
if None:
    print("这不会执行")
```

``` python
empty_list = []
print(empty_list is None)
```

    False

## 字符串(str)

字符串作为Python中文本处理的基本数据格式，就像一个装文字的口袋，可以装下任何文字内容并且拥有丰富的操作方法。字符串是不可变数据，因此每次操作都会形成新的字符串。

``` python
hello = "hello"
world = "world"
combined = hello + " " + world
print(f"{hello}的id是{id(hello)}")
print(f"{world}的id是{id(world)}")
print(f"{combined}的id是{id(combined)}")
```

    hello的id是4386131184
    world的id是4397209200
    hello world的id是4397211248

``` python
multi = ''' 多行 输入
 的方法
 测试'''
```

``` python
hello_space = hello + " "
print(f"{hello_space}的id是{id(hello_space)}")
```

    hello 的id是4397206896

### 字符串合并

``` python
introduce = "indroduce" + " me"
print(introduce)
```

    indroduce me

``` python
test = ["Hello", "World","c++", "PYTHON"]
sentence = ", ".join(test)
print(sentence)
```

    Hello, World, c++, PYTHON

### 重复字符串

``` python
repeat = "Na" * 6 + " Batman!" * 7
print(repeat)
```

    NaNaNaNaNaNa Batman! Batman! Batman! Batman! Batman! Batman! Batman!

### 索引与切片

切片的基本语法是:`sequence[start:stop:step]`

``` python
text = "Python" 
print(text[0]) 
print(text[1:4])  
print(text[::-1])
```

    P
    yth
    nohtyP

``` python
greeting = "Hello"
try:
    greeting[0] = 'h'
except TypeError as e:
    print(f"Error: {e}")
```

    Error: 'str' object does not support item assignment

### 查找与切换

``` python
sentence = "你好，这是Python课程。"
print(sentence.find("是")) 
new_sentence = sentence.replace("你", "您")
print(new_sentence)  
print(sentence)
```

    4
    您好，这是Python课程。
    你好，这是Python课程。

### 字符串分割

``` python
txt = "we have apple banana and cherry."
fruits = txt.split(" ")
print(fruits) 
print(f"这里一共有{len(fruits)}个单词")
```

    ['we', 'have', 'apple', 'banana', 'and', 'cherry.']
    这里一共有6个单词

### 大小写切换

``` python
text = "Artificial Intelligent is fun"
print(text.upper())      
print(text.lower())     
print(text.capitalize())
```

    ARTIFICIAL INTELLIGENT IS FUN
    artificial intelligent is fun
    Artificial intelligent is fun

### 去除空格

``` python
text = "   Python   "
print(text.strip())
```

    Python

### 字符串检查

``` python
print("Python".startswith("Py"))  
print("Oth".isdigit())
```

    True
    False

``` python
text = "Hello, world"
print(text.endswith("word"))
```

    False

``` python
text = "abc"
print(text.isalpha())
```

    True

### 字符串格式化

Python的字符串格式化有这么几种：

- %符号

``` python
name = "Tom"
age = 22
formatted = "My name is %s and I am %d years old." %(name, age)
print(formatted)
```

    My name is Tom and I am 22 years old.

- `format()`方法

``` python
# 使用 format() 方法
name = "Alice"
age = 30
print("My name is {} and I'm {} years old".format(name, age))
```

    My name is Alice and I'm 30 years old

- f-strings由Python 3.6引入的最便捷的字符串格式方法

``` python
name = "Judy"
age = 40
country = "USA"
print(f"My name is {name} and I'm {age} years old from {country}")
```

    My name is Judy and I'm 40 years old from USA

``` python
pi = 3.1415926
print(f"Pi is {pi:.3f}")
```

    Pi is 3.142

到此我们可以回顾一下Python的主要数据类型，如下表。

<table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
<th>是否可变</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>整数 (int)</td>
<td>表示整数</td>
<td>否</td>
<td><code>42</code>, <code>-10</code>, <code>0</code></td>
</tr>
<tr>
<td>浮点数 (float)</td>
<td>表示小数</td>
<td>否</td>
<td><code>3.14</code>, <code>-0.001</code>, <code>2.0e-3</code></td>
</tr>
<tr>
<td>布尔 (bool)</td>
<td>表示真或假</td>
<td>否</td>
<td><code>True</code>, <code>False</code></td>
</tr>
<tr>
<td>字符串 (str)</td>
<td>表示文本</td>
<td>否</td>
<td><code>"Hello"</code>, <code>'Python'</code></td>
</tr>
<tr>
<td>复数 (complex)</td>
<td>表示复数</td>
<td>否</td>
<td><code>3+4j</code>, <code>2-1j</code></td>
</tr>
<tr>
<td>NoneType</td>
<td>表示空值</td>
<td>不适用</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>

下面让我们开始设计我们的奶茶店”Python奶茶屋”,先看看这些基本数据类型能帮我们做些什么? 1.
订单备注 - 记录客人的各种特殊要求，就像给奶茶贴上的小纸条。 2.
账单系统 - 包括今日订单总数，今日应收，平均评分。 3. 检查状态 -
包括订单状态，是否放冰，是否放糖，是否线上订单。
